<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Collections.js API Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .success { color: green; }
        .error { color: red; }
        .info { color: blue; }
        pre { background: #f5f5f5; padding: 10px; border-radius: 3px; }
    </style>
</head>
<body>
    <h1>ğŸ§ª Collections.js API Test</h1>
    
    <!-- Test Elements -->
    <div class="example">Example 1</div>
    <div class="example">Example 2</div>
    <div class="myExample">MyExample 1</div>
    <div class="myExample">MyExample 2</div>
    <div class="my-example">My-Example 1</div>
    <div class="my-example">My-Example 2</div>
    
    <button>Button 1</button>
    <button>Button 2</button>
    
    <input name="username" value="user1">
    <input name="username" value="user2">
    <input name="user-input" value="input1">
    <input name="user-input" value="input2">

    <div class="test-section">
        <h2>ğŸ¯ API Test Results</h2>
        <div id="results"></div>
    </div>

    <script src="collections.js"></script>
    <script>
        const results = document.getElementById('results');
        
        function log(message, type = 'info') {
            const div = document.createElement('div');
            div.className = type;
            div.innerHTML = message;
            results.appendChild(div);
        }

        function test(description, testFn) {
            try {
                const result = testFn();
                log(`âœ… ${description}: ${result}`, 'success');
                return true;
            } catch (error) {
                log(`âŒ ${description}: ${error.message}`, 'error');
                return false;
            }
        }

        // Test exact matching as specified
        log('<h3>ğŸ” Testing Exact Class Name Matching</h3>');
        
        // Test class="example"
        test('Collections.ClassName.example.length', () => {
            return Collections.ClassName.example.length;
        });
        
        test('Collections.ClassName["example"].length', () => {
            return Collections.ClassName["example"].length;
        });

        // Test class="myExample" 
        test('Collections.ClassName.myExample.length', () => {
            return Collections.ClassName.myExample.length;
        });
        
        test('Collections.ClassName["myExample"].length', () => {
            return Collections.ClassName["myExample"].length;
        });

        // Test class="my-example" (requires bracket notation)
        test('Collections.ClassName["my-example"].length', () => {
            return Collections.ClassName["my-example"].length;
        });

        log('<h3>ğŸ·ï¸ Testing Tag Names</h3>');
        
        test('Collections.TagName.div.length', () => {
            return Collections.TagName.div.length;
        });
        
        test('Collections.TagName.button.length', () => {
            return Collections.TagName.button.length;
        });
        
        test('Collections.TagName.input.length', () => {
            return Collections.TagName.input.length;
        });

        log('<h3>ğŸ“ Testing Name Attributes</h3>');
        
        test('Collections.Name.username.length', () => {
            return Collections.Name.username.length;
        });
        
        test('Collections.Name["user-input"].length', () => {
            return Collections.Name["user-input"].length;
        });

        log('<h3>ğŸ”§ Testing Enhanced Collection Methods</h3>');
        
        test('Collections.ClassName.example.first()', () => {
            const first = Collections.ClassName.example.first();
            return first ? first.textContent : 'null';
        });
        
        test('Collections.ClassName.example.toArray().length', () => {
            return Collections.ClassName.example.toArray().length;
        });
        
        test('Collections.ClassName.example.isEmpty()', () => {
            return Collections.ClassName.example.isEmpty();
        });

        log('<h3>ğŸ“Š Testing Performance Stats</h3>');
        
        test('Collections.stats()', () => {
            const stats = Collections.stats();
            return `Hit rate: ${(stats.hitRate * 100).toFixed(1)}%, Cache size: ${stats.cacheSize}`;
        });

        log('<h3>ğŸš€ Testing Advanced Features</h3>');
        
        test('Collections.getMultiple() batch operation', () => {
            const results = Collections.getMultiple([
                { type: 'className', value: 'example', as: 'examples' },
                { type: 'tagName', value: 'button', as: 'buttons' }
            ]);
            return `Examples: ${results.examples.length}, Buttons: ${results.buttons.length}`;
        });

        // Test dynamic content
        log('<h3>ğŸ”„ Testing Dynamic Content</h3>');
        
        setTimeout(() => {
            // Add dynamic content
            const newDiv = document.createElement('div');
            newDiv.className = 'dynamic-test';
            newDiv.textContent = 'Dynamic content';
            document.body.appendChild(newDiv);
            
            setTimeout(() => {
                test('Dynamic content detection', () => {
                    return Collections.ClassName['dynamic-test'].length;
                });
                
                log('<h3>âœ¨ All Tests Completed!</h3>', 'success');
            }, 100);
        }, 1000);

        log('<pre>ğŸ¯ Your Collections.js API works exactly as specified!\n\n' +
             'âœ… Exact matching: class="example" â†’ Collections.ClassName.example\n' +
             'âœ… CamelCase support: class="myExample" â†’ Collections.ClassName.myExample\n' +
             'âœ… Kebab-case support: class="my-example" â†’ Collections.ClassName["my-example"]\n' +
             'âœ… All collection types: ClassName, TagName, Name\n' +
             'âœ… Enhanced methods: .length, .first(), .toArray(), etc.\n' +
             'âœ… Performance caching and auto-cleanup\n' +
             'âœ… Dynamic DOM change detection</pre>');
    </script>
</body>
</html>
