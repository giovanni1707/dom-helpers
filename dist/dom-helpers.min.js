/**
 * DOM Helpers - Combined Bundle (Unminified)
 * High-performance vanilla JavaScript DOM utilities with intelligent caching
 * 
 * Includes:
 * - Elements Helper (ID-based DOM access)
 * - Collections Helper (Class/Tag/Name-based DOM access)
 * 
 * @version 2.0.0
 * @license MIT
 */
!function(e){"use strict";class ProductionElementsHelper{constructor(e={}){this.cache=new Map,this.weakCache=new WeakMap,this.options={enableLogging:e.enableLogging??!1,autoCleanup:e.autoCleanup??!0,cleanupInterval:e.cleanupInterval??3e4,maxCacheSize:e.maxCacheSize??1e3,debounceDelay:e.debounceDelay??16,...e},this.stats={hits:0,misses:0,cacheSize:0,lastCleanup:Date.now()},this.pendingUpdates=new Set,this.cleanupTimer=null,this.isDestroyed=!1,this._initProxy(),this._initMutationObserver(),this._scheduleCleanup()}_initProxy(){this.Elements=new Proxy(this,{get:(e,t)=>e._getElement(t),has:(e,t)=>e._hasElement(t),ownKeys:e=>e._getKeys(),getOwnPropertyDescriptor:(e,t)=>{if(e._hasElement(t))return{enumerable:!0,configurable:!0,value:e._getElement(t)}}})}_findElementId(e){return e}_getElement(e){if("string"!=typeof e)return this._warn("Invalid element property type: "+typeof e),null;if(this.cache.has(e)){const t=this.cache.get(e);if(t&&document.contains(t))return this.stats.hits++,t;this.cache.delete(e)}const t=document.getElementById(e);return t?(this._addToCache(e,t),this.stats.misses++,t):(this.stats.misses++,this._warn(`Element with id '${e}' not found`),null)}_hasElement(e){if("string"!=typeof e)return!1;if(this.cache.has(e)){const t=this.cache.get(e);if(t&&document.contains(t))return!0;this.cache.delete(e)}return!!document.getElementById(e)}_getKeys(){return Array.from(document.querySelectorAll("[id]")).map(e=>e.id)}_addToCache(e,t){if(this.cache.size>=this.options.maxCacheSize){const e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t),this.stats.cacheSize=this.cache.size,this.weakCache.set(t,{id:e,cachedAt:Date.now(),accessCount:1})}_initMutationObserver(){const e=this._debounce(e=>{this._processMutations(e)},this.options.debounceDelay);this.observer=new MutationObserver(e),this.observer.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["id"]})}_processMutations(e){if(this.isDestroyed)return;const t=new Set,s=new Set;e.forEach(e=>{if(e.addedNodes.forEach(e=>{e.nodeType===Node.ELEMENT_NODE&&(e.id&&t.add(e.id),(e.querySelectorAll?.("[id]")||[]).forEach(e=>t.add(e.id)))}),e.removedNodes.forEach(e=>{e.nodeType===Node.ELEMENT_NODE&&(e.id&&s.add(e.id),(e.querySelectorAll?.("[id]")||[]).forEach(e=>s.add(e.id)))}),"attributes"===e.type&&"id"===e.attributeName){const i=e.oldValue,n=e.target.id;i&&i!==n&&s.add(i),n&&n!==i&&t.add(n)}}),t.forEach(e=>{const t=document.getElementById(e);t&&this._addToCache(e,t)}),s.forEach(e=>{this.cache.delete(e)}),this.stats.cacheSize=this.cache.size}_scheduleCleanup(){this.options.autoCleanup&&!this.isDestroyed&&(this.cleanupTimer=setTimeout(()=>{this._performCleanup(),this._scheduleCleanup()},this.options.cleanupInterval))}_performCleanup(){if(this.isDestroyed)return;const e=this.cache.size,t=[];for(const[e,s]of this.cache)s&&document.contains(s)||t.push(e);t.forEach(e=>this.cache.delete(e)),this.stats.cacheSize=this.cache.size,this.stats.lastCleanup=Date.now(),this._log(`Cleanup completed. Removed ${e-this.cache.size} stale entries.`)}_debounce(e,t){let s;return(...i)=>{clearTimeout(s),s=setTimeout(()=>e.apply(this,i),t)}}_log(e){this.options.enableLogging&&console.log(`[Elements] ${e}`)}_warn(e){this.options.enableLogging&&console.warn(`[Elements] ${e}`)}getStats(){return{...this.stats,hitRate:this.stats.hits/(this.stats.hits+this.stats.misses)||0,uptime:Date.now()-this.stats.lastCleanup}}clearCache(){this.cache.clear(),this.stats.cacheSize=0,this._log("Cache cleared manually")}destroy(){this.isDestroyed=!0,this.observer&&(this.observer.disconnect(),this.observer=null),this.cleanupTimer&&(clearTimeout(this.cleanupTimer),this.cleanupTimer=null),this.cache.clear(),this._log("Elements helper destroyed")}isCached(e){return this.cache.has(e)}getCacheSnapshot(){return Array.from(this.cache.keys())}destructure(...e){const t={},s=[];return e.forEach(e=>{const i=this.Elements[e];i?t[e]=i:(s.push(e),t[e]=null)}),s.length>0&&this.options.enableLogging&&this._warn(`Missing elements during destructuring: ${s.join(", ")}`),t}getRequired(...e){const t=this.destructure(...e),s=e.filter(e=>!t[e]);if(s.length>0)throw new Error(`Required elements not found: ${s.join(", ")}`);return t}async waitFor(...e){const t=Date.now();for(;Date.now()-t<5e3;){const t=this.destructure(...e);if(e.every(e=>t[e]))return t;await new Promise(e=>setTimeout(e,100))}throw new Error(`Timeout waiting for elements: ${e.join(", ")}`)}}const t=new ProductionElementsHelper({enableLogging:!1,autoCleanup:!0,cleanupInterval:3e4,maxCacheSize:1e3}),Elements=t.Elements;Elements.helper=t,Elements.stats=()=>t.getStats(),Elements.clear=()=>t.clearCache(),Elements.destroy=()=>t.destroy(),Elements.destructure=(...e)=>t.destructure(...e),Elements.getRequired=(...e)=>t.getRequired(...e),Elements.waitFor=(...e)=>t.waitFor(...e),Elements.isCached=e=>t.isCached(e),Elements.configure=e=>(Object.assign(t.options,e),Elements),"undefined"!=typeof module&&module.exports?module.exports={Elements:Elements,ProductionElementsHelper:ProductionElementsHelper}:"function"==typeof define&&define.amd?define([],function(){return{Elements:Elements,ProductionElementsHelper:ProductionElementsHelper}}):(e.Elements=Elements,e.ProductionElementsHelper=ProductionElementsHelper),"undefined"!=typeof window&&window.addEventListener("beforeunload",()=>{t.destroy()});class ProductionCollectionHelper{constructor(e={}){this.cache=new Map,this.weakCache=new WeakMap,this.options={enableLogging:e.enableLogging??!1,autoCleanup:e.autoCleanup??!0,cleanupInterval:e.cleanupInterval??3e4,maxCacheSize:e.maxCacheSize??1e3,debounceDelay:e.debounceDelay??16,...e},this.stats={hits:0,misses:0,cacheSize:0,lastCleanup:Date.now()},this.pendingUpdates=new Set,this.cleanupTimer=null,this.isDestroyed=!1,this._initProxies(),this._initMutationObserver(),this._scheduleCleanup()}_initProxies(){this.ClassName=new Proxy(this,{get:(e,t)=>"symbol"==typeof t||"function"==typeof e[t]?e[t]:e._getCollection("className",t)}),this.TagName=new Proxy(this,{get:(e,t)=>"symbol"==typeof t||"function"==typeof e[t]?e[t]:e._getCollection("tagName",t)}),this.Name=new Proxy(this,{get:(e,t)=>"symbol"==typeof t||"function"==typeof e[t]?e[t]:e._getCollection("name",t)})}_createCacheKey(e,t){return`${e}:${t}`}_getCollection(e,t){if("string"!=typeof t)return this._warn(`Invalid ${e} property type: ${typeof t}`),this._createEmptyCollection();const s=this._createCacheKey(e,t);if(this.cache.has(s)){const e=this.cache.get(s);if(this._isValidCollection(e))return this.stats.hits++,e;this.cache.delete(s)}let i;switch(e){case"className":i=document.getElementsByClassName(t);break;case"tagName":i=document.getElementsByTagName(t);break;case"name":i=document.getElementsByName(t);break;default:return this._warn(`Unknown collection type: ${e}`),this._createEmptyCollection()}const n=this._enhanceCollection(i,e,t);return this._addToCache(s,n),this.stats.misses++,n}_isValidCollection(e){if(!e||!e._originalCollection)return!1;const t=e._originalCollection;if(0===t.length)return!0;const s=t[0];return s&&document.contains(s)}_enhanceCollection(e,t,s){const i={_originalCollection:e,_type:t,_value:s,_cachedAt:Date.now(),get length(){return e.length},item:t=>e.item(t),namedItem:t=>e.namedItem?e.namedItem(t):null,toArray:()=>Array.from(e),forEach(t,s){Array.from(e).forEach(t,s)},map:(t,s)=>Array.from(e).map(t,s),filter:(t,s)=>Array.from(e).filter(t,s),find:(t,s)=>Array.from(e).find(t,s),some:(t,s)=>Array.from(e).some(t,s),every:(t,s)=>Array.from(e).every(t,s),first:()=>e.length>0?e[0]:null,last:()=>e.length>0?e[e.length-1]:null,at:t=>(t<0&&(t=e.length+t),t>=0&&t<e.length?e[t]:null),isEmpty:()=>0===e.length};for(let t=0;t<e.length;t++)Object.defineProperty(i,t,{get:()=>e[t],enumerable:!0});return i[Symbol.iterator]=function*(){for(let t=0;t<e.length;t++)yield e[t]},i}_createEmptyCollection(){return this._enhanceCollection({length:0,item:()=>null,namedItem:()=>null},"empty","")}_addToCache(e,t){if(this.cache.size>=this.options.maxCacheSize){const e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t),this.stats.cacheSize=this.cache.size,this.weakCache.set(t,{cacheKey:e,cachedAt:Date.now(),accessCount:1})}_initMutationObserver(){const e=this._debounce(e=>{this._processMutations(e)},this.options.debounceDelay);this.observer=new MutationObserver(e),this.observer.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","name"]})}_processMutations(e){if(this.isDestroyed)return;const t=new Set,s=new Set,i=new Set;e.forEach(e=>{if([...e.addedNodes,...e.removedNodes].forEach(e=>{e.nodeType===Node.ELEMENT_NODE&&(e.className&&e.className.split(/\s+/).forEach(e=>{e&&t.add(e)}),e.name&&s.add(e.name),i.add(e.tagName.toLowerCase()),(e.querySelectorAll?e.querySelectorAll("*"):[]).forEach(e=>{e.className&&e.className.split(/\s+/).forEach(e=>{e&&t.add(e)}),e.name&&s.add(e.name),i.add(e.tagName.toLowerCase())}))}),"attributes"===e.type){const i=e.target;"class"===e.attributeName&&[...e.oldValue?e.oldValue.split(/\s+/):[],...i.className?i.className.split(/\s+/):[]].forEach(e=>{e&&t.add(e)}),"name"===e.attributeName&&(e.oldValue&&s.add(e.oldValue),i.name&&s.add(i.name))}});const n=[];for(const e of this.cache.keys()){const[o,a]=e.split(":",2);("className"===o&&t.has(a)||"name"===o&&s.has(a)||"tagName"===o&&i.has(a))&&n.push(e)}n.forEach(e=>this.cache.delete(e)),this.stats.cacheSize=this.cache.size,n.length>0&&this._log(`Invalidated ${n.length} cache entries due to DOM changes`)}_scheduleCleanup(){this.options.autoCleanup&&!this.isDestroyed&&(this.cleanupTimer=setTimeout(()=>{this._performCleanup(),this._scheduleCleanup()},this.options.cleanupInterval))}_performCleanup(){if(this.isDestroyed)return;const e=this.cache.size,t=[];for(const[e,s]of this.cache)this._isValidCollection(s)||t.push(e);t.forEach(e=>this.cache.delete(e)),this.stats.cacheSize=this.cache.size,this.stats.lastCleanup=Date.now(),this._log(`Cleanup completed. Removed ${e-this.cache.size} stale entries.`)}_debounce(e,t){let s;return(...i)=>{clearTimeout(s),s=setTimeout(()=>e.apply(this,i),t)}}_log(e){this.options.enableLogging&&console.log(`[Collections] ${e}`)}_warn(e){this.options.enableLogging&&console.warn(`[Collections] ${e}`)}getStats(){return{...this.stats,hitRate:this.stats.hits/(this.stats.hits+this.stats.misses)||0,uptime:Date.now()-this.stats.lastCleanup}}clearCache(){this.cache.clear(),this.stats.cacheSize=0,this._log("Cache cleared manually")}destroy(){this.isDestroyed=!0,this.observer&&(this.observer.disconnect(),this.observer=null),this.cleanupTimer&&(clearTimeout(this.cleanupTimer),this.cleanupTimer=null),this.cache.clear(),this._log("Collections helper destroyed")}isCached(e,t){return this.cache.has(this._createCacheKey(e,t))}getCacheSnapshot(){return Array.from(this.cache.keys())}getMultiple(e){const t={};return e.forEach(({type:e,value:s,as:i})=>{const n=i||`${e}_${s}`;switch(e){case"className":t[n]=this.ClassName[s];break;case"tagName":t[n]=this.TagName[s];break;case"name":t[n]=this.Name[s]}}),t}async waitForElements(e,t,s=1,i=5e3){const n=Date.now();for(;Date.now()-n<i;){let i;switch(e){case"className":i=this.ClassName[t];break;case"tagName":i=this.TagName[t];break;case"name":i=this.Name[t];break;default:throw new Error(`Unknown collection type: ${e}`)}if(i&&i.length>=s)return i;await new Promise(e=>setTimeout(e,100))}throw new Error(`Timeout waiting for ${e}="${t}" (min: ${s})`)}}const s=new ProductionCollectionHelper({enableLogging:!1,autoCleanup:!0,cleanupInterval:3e4,maxCacheSize:1e3}),Collections={ClassName:s.ClassName,TagName:s.TagName,Name:s.Name,helper:s,stats:()=>s.getStats(),clear:()=>s.clearCache(),destroy:()=>s.destroy(),isCached:(e,t)=>s.isCached(e,t),getMultiple:e=>s.getMultiple(e),waitFor:(e,t,i,n)=>s.waitForElements(e,t,i,n),configure:e=>(Object.assign(s.options,e),Collections)};"undefined"!=typeof module&&module.exports?module.exports={Collections:Collections,ProductionCollectionHelper:ProductionCollectionHelper}:"function"==typeof define&&define.amd?define([],function(){return{Collections:Collections,ProductionCollectionHelper:ProductionCollectionHelper}}):(e.Collections=Collections,e.ProductionCollectionHelper=ProductionCollectionHelper),"undefined"!=typeof window&&window.addEventListener("beforeunload",()=>{s.destroy()});const DOMHelpers={Elements:e.Elements,Collections:e.Collections,ProductionElementsHelper:e.ProductionElementsHelper,ProductionCollectionHelper:e.ProductionCollectionHelper,version:"2.0.0",isReady(){return!(!this.Elements||!this.Collections)},getStats(){const stats={};return this.Elements&&"function"==typeof this.Elements.stats&&(stats.elements=this.Elements.stats()),this.Collections&&"function"==typeof this.Collections.stats&&(stats.collections=this.Collections.stats()),stats},clearAll(){this.Elements&&"function"==typeof this.Elements.clear&&this.Elements.clear(),this.Collections&&"function"==typeof this.Collections.clear&&this.Collections.clear()},destroyAll(){this.Elements&&"function"==typeof this.Elements.destroy&&this.Elements.destroy(),this.Collections&&"function"==typeof this.Collections.destroy&&this.Collections.destroy()},configure(e={}){return this.Elements&&"function"==typeof this.Elements.configure&&this.Elements.configure(e.elements||e),this.Collections&&"function"==typeof this.Collections.configure&&this.Collections.configure(e.collections||e),this}};"undefined"!=typeof module&&module.exports?module.exports={DOMHelpers:DOMHelpers,Elements:e.Elements,Collections:e.Collections,ProductionElementsHelper:e.ProductionElementsHelper,ProductionCollectionHelper:e.ProductionCollectionHelper}:"function"==typeof define&&define.amd?define([],function(){return{DOMHelpers:DOMHelpers,Elements:e.Elements,Collections:e.Collections,ProductionElementsHelper:e.ProductionElementsHelper,ProductionCollectionHelper:e.ProductionCollectionHelper}}):e.DOMHelpers=DOMHelpers,"undefined"!=typeof window&&window.addEventListener("beforeunload",()=>{DOMHelpers.destroyAll()})}("undefined"!=typeof window?window:"undefined"!=typeof global?global:this);